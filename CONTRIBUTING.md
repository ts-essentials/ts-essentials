# Contributing

All contributions to `ts-essentials` are welcomed.

Do you have idea for a new type? Please, first submit a GitHub issue (or send me PM) and describe your proposal.

## Conventions

To follow ts-essentials conventions, please check [CONVENTIONS.md](./CONVENTIONS.md). Anything missing or something is
unclear? Don't hesitate to suggest it in a GitHub issue and please don't forget to add the `convention` label.

## Adding/Updating types

1. [Choose the right folder](#1-choose-the-right-folder)
2. Add/Update implementation
3. [Add/Update unit tests](#3-addupdate-unit-tests)
4. [Update top-level README](#4-update-top-level-readme)
5. [Update individual README](#5-update-individual-readme)
6. [Add changeset](#6-add-changeset)
7. [Type-check, Formatting and Linting](#7-type-check-formatting-and-linting)
8. Submit PR and Verify CI checks

### 1. Choose the right folder

- [`lib/functions`](lib/functions) ‚Äî¬†functions that incur _some_ runtime overhead
- Otherwise, `lib/<type-name>` (e.g. [`lib/merge`](lib/merge)) ‚Äî pure types, with 0 runtime overhead

Recommendations:

1. When adding a new utility type, add `export * from "./<type-name>";` to `lib/index.ts`, so clients can import `<type-name>` as `import { <type-name> } from 'ts-essentials'`

### 3. Add/Update unit tests

Tests for type are expected to be in `tests/<type-name>.ts`, e.g. [`test/strict-omit.ts`](/test/strict-omit.ts)

However, not all tests are moved to individual files and can still be a part of `test/index.ts`. If this is still the case, the recommendation is to move them to a separate file.

### 4. Update top-level README

Add/Update description of the type in [README.md > API](/README.md#api), e.g.

> - [`StrictOmit<Type, Keys>`](/lib/strict-omit) - Constructs a type by picking all properties from `Type` and then
>   removing `Keys`. This is stricter version of
>   [`Omit`](https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys)

The recommendations:

1. Add type parameters (e.g. `Type` and `Keys`)
2. Keep the link to the folder (e.g. `/lib/strict-omit`)
3. Use type parameters and links in description

### 5. Update individual README

Individual README is expected to be in `lib/<type-name>/README.md` (e.g. [`lib/strict-omit/README.md`](/lib/strict-omit/README.md)).

Add/Update description with short examples and a link to [TS Playground](https://www.typescriptlang.org/play)

Recommendations:
1. Reuse description from top-level README
2. Make examples useful and practical, where possible.
3. Includes limitations of the type, when applicable. See [`StrictDeepOmit`](https://github.com/ts-essentials/ts-essentials/tree/master/lib/strict-deep-omit)
4. Generate TS Playground shortened link. See [5.1. Generate TS Playground shortened link](#51-generate-ts-playground-shortened-link)

### 5.1. Generate TS Playground shortened link

1. Visit [typescriptlang.org/play](https://www.typescriptlang.org/play/)
2. Open Plugins on sidebar (right side of the page), look for "Link Shortener by gillchristian", toggle it on and reload the page
3. Add all the code that you'd like to share
4. Find Link Shortener on sidebar, click "CREATE SHORT LINK", the link will be copied to your Clipboard

### 6. Add changeset

A changeset is generated by running `yarn changeset`, e.g.

> Add `StrictOmit<Type, Keys>`, a stricter version of `Omit`. It validates that properties `Keys` exist in type `Type`

Recommendations:

1. Include only user-facing changes
    - **Good examples**: bug fixes, new utility type, utility type improvements, utility type removals, deprecations, etc.
    - **Not expected to include**: test changes, documentation updates, infrastructure changes, etc.
2. Use meaningful description as the changeset will be used as is in releases (see [v10.0.0](https://github.com/ts-essentials/ts-essentials/releases/tag/v10.0.0))

### 7. Type-check, Formatting and Linting

Recommendations:

1. Use node version from `.npmrc`, e.g. by running `nvm use` if you use [node version manager](https://github.com/nvm-sh/nvm)
1. Run `yarn` to install all dependencies
1. Run `yarn test` to find any TS errors, [ESLint](https://eslint.org/) or [Prettier](https://prettier.io/) errors
1. Use `yarn test:fix` to fix ESLint/Prettier errors 

### 8. Submit PR and Verify CI checks

Once you created PR, first self-review the changes and only then ask maintainers to review PR. When maintainers approve running CI checks, make sure that all CI checks pass.

---

Thanks! üôèüèª
